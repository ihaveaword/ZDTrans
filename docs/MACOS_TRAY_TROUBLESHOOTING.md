# macOS 托盘图标问题排查指南

## 🔍 问题：找不到托盘图标

### 方法 1：运行测试脚本（推荐）

```bash
# 激活虚拟环境并运行测试
source .venv/bin/activate
python test_tray.py
```

这个测试脚本会：
- ✅ 检查系统是否支持托盘
- ✅ 创建一个**蓝色圆形**测试图标
- ✅ 显示一条通知消息
- ✅ 告诉您在哪里找图标

### 方法 2：使用启动脚本

```bash
./start.sh
```

### 方法 3：手动启动

```bash
source .venv/bin/activate
python main.py
```

## 📍 在 macOS 上查找托盘图标

### 位置
托盘图标位于屏幕 **右上角** 的状态栏，靠近时间、WiFi、电池等系统图标。

### 外观
- **形状**：蓝色圆形
- **标识**：中间有字母 "T"
- **大小**：和其他系统图标差不多大

### 如果看不到

#### 1️⃣ 检查隐藏的图标
macOS 可能会隐藏一些图标。请：
- 查找状态栏中的 **向下箭头 ⌄** 或 **三个点 ⋯**
- 点击展开隐藏的图标

#### 2️⃣ 检查控制中心设置
```
系统偏好设置 > 控制中心 > 菜单栏
```
确保允许第三方应用显示在菜单栏。

#### 3️⃣ 查看所有菜单栏图标
按住 `Command (⌘)` 键，用鼠标拖动菜单栏图标，可以重新排列它们。

#### 4️⃣ 重启程序
如果还是看不到，尝试：
```bash
# 停止程序（Ctrl+C）
# 重新启动
./start.sh
```

## 💡 使用方法

### 打开菜单
找到图标后，**左键点击** 即可打开菜单。

在 macOS 上：
- ✅ **左键点击** → 打开菜单
- ✅ **右键点击** → 也能打开菜单

### 菜单选项
- ⚙️ **设置** - 配置 API、关键词、快捷键
- ℹ️ **关于** - 查看程序信息
- 🚪 **退出** - 退出程序

## 🐛 仍然看不到？

### 检查程序是否运行
```bash
ps aux | grep python | grep main.py
```

如果有输出，说明程序正在运行。

### 查看程序输出
运行程序时会显示：
```
🎨 托盘图标已创建
✅ 托盘图标已显示
💡 请在屏幕右上角状态栏查找蓝色圆形图标
```

### 尝试其他方法

如果托盘图标实在看不到，您还可以：

#### 方案 A：使用菜单栏应用（未来计划）
考虑改用菜单栏应用而不是托盘图标。

#### 方案 B：使用命令行
暂时跳过图形界面，直接配置 `config.json` 文件。

#### 方案 C：创建 .app 应用包
使用 py2app 打包成 macOS 应用。

## 📞 需要帮助？

如果以上方法都无效，请：
1. 运行 `test_tray.py` 并截图输出
2. 检查是否有错误消息
3. 告诉我您的 macOS 版本

---

**快速测试命令**：
```bash
source .venv/bin/activate && python test_tray.py
```
