# 更新日志 (Changelog)

## v1.2.0 (2025-10-31)

### 🌙 新增：夜色模式

#### 功能特性
- ✅ 支持日间/夜间双主题切换
- ✅ 所有窗口实时同步（主窗口、弹出窗口、设置窗口）
- ✅ 三种切换方式：主窗口按钮、设置界面、配置文件
- ✅ 主题偏好持久化保存

#### 技术实现
- 新增 `src/theme.py` 主题管理模块
- 修改 `src/main_window.py` 添加主题切换按钮
- 修改 `src/popup.py` 支持主题切换
- 修改 `src/settings.py` 添加主题选择选项
- 修改 `main.py` 启动时加载主题配置

#### 使用方法
- **快捷方式**：点击主窗口左下角 🌙/☀️ 按钮
- **设置界面**：设置 → 界面配置 → 主题
- **配置文件**：`"ui": {"theme": "dark"}`

#### 配色方案
- **日间模式**：浅色背景 (#f5f5f5)，深色文字 (#000000)
- **夜间模式**：深色背景 (#1e1e1e)，浅色文字 (#e0e0e0)

**详细文档**：[夜色模式使用指南](NIGHT_MODE_GUIDE.md)

---

### 🎓 新增：自定义学科领域

#### 功能特性
- ✅ 学科领域下拉框支持直接输入
- ✅ 一键添加自定义领域到列表（`+` 按钮）
- ✅ 自定义领域持久化保存
- ✅ 完全兼容9个预设标准领域

#### 技术实现
- 修改 `src/settings.py` 学科领域下拉框为可编辑模式
- 添加 `_add_custom_domain()` 方法处理自定义领域
- 配置文件新增 `custom_domains` 字段保存自定义列表

#### 使用方法
- **界面添加**：设置 → 翻译配置 → 学科领域输入框 → 点击 `+`
- **配置文件**：
  ```json
  {
    "translation": {
      "domain": "量子计算",
      "custom_domains": ["量子计算", "区块链技术"]
    }
  }
  ```

#### 应用场景
- 前沿技术领域（量子计算、区块链）
- 交叉学科研究（计算神经科学）
- 特定行业术语（金融科技）

**详细文档**：[自定义学科领域指南](CUSTOM_DOMAIN_GUIDE.md)

---

### 📝 文档更新
- ✅ 更新 README.md 添加新功能说明
- ✅ 新增 `docs/NIGHT_MODE_GUIDE.md` 夜色模式详细指南
- ✅ 新增 `docs/THEME_COMPARISON.md` 主题对比说明
- ✅ 新增 `docs/CUSTOM_DOMAIN_GUIDE.md` 自定义领域详细指南
- ✅ 创建 `test_theme.py` 主题演示脚本

### 🐛 Bug 修复
- 无

### ⚡ 性能优化
- 主题切换延迟 < 100ms
- 内存占用增加 < 1MB

### 🔧 其他改进
- 更新 `config.json.example` 配置示例
- 代码质量：所有文件通过语法检查
- 向后兼容：支持旧配置文件

---

## v1.1.0 (更早版本)

### 新增功能
- 主窗口可视化界面
- 关键词配置功能
- 学术模式支持
- macOS 托盘图标优化

### Bug 修复
- 修复 macOS 托盘图标不显示问题
- 修复快捷键冲突

---

## v1.0.0 (初始版本)

### 核心功能
- ✅ 全局快捷键翻译（Ctrl+Q）
- ✅ 全局快捷键润色（Ctrl+Shift+Q）
- ✅ 即时弹出窗口显示结果
- ✅ 系统托盘常驻
- ✅ 支持 OpenAI、火山方舟、DeepL、Claude
- ✅ 9个预设学科领域

---

## 规划中的功能

### v1.3.0 (计划中)
- [ ] 主题自动切换（根据系统时间）
- [ ] 跟随系统主题
- [ ] 更多主题预设（护眼模式、高对比度）
- [ ] 自定义主题编辑器
- [ ] 学科领域模板库（社区分享）
- [ ] 翻译历史记录
- [ ] 导出/导入配置

### v1.4.0 (计划中)
- [ ] OCR 截图翻译
- [ ] 批量翻译
- [ ] 翻译缓存
- [ ] 插件系统

---

**维护者**: ZDTrans Team  
**最后更新**: 2025-10-31
